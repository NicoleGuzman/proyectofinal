<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:b="http://bootsfaces.net/ui">

<h:head>
	<title><h:outputText value="#{msg.index_titulo}"></h:outputText></title>
</h:head>

<h:body>
	<ui:include src="Common/Navbar.xhtml"></ui:include>


	<b:row styleClass="show-grid">

		<b:column span="10" offset="1">
			<h1>Catalogo</h1>
			<ui:repeat value="#{beanCatalogoProducto.listaCatalogo}"
				var="producto">
				<div class="col-sm-3 mb-3 border">
					<div class="card h-100">
						<h:form>							
							<h:graphicImage value="#{producto.imagen}" class="card-img-top img-fluid" alt="..." width="300" height="500" style="object-fit: cover;" />							 						 
							<div class="card-body d-flex flex-column justify-content-between">							
								<h5 class="card-title text-center mb-3">#{producto.nombre}</h5>
								<p class="card-text">#{producto.descripcion}</p>
								<div class="d-flex justify-content-between align-items-end">
									<p class="card-text mb-0">Precio: #{producto.precio}</p>
									<p class="card-text mb-0">Stock: #{producto.stock} unidades</p>
								</div>
								<div class="d-flex justify-content-between align-items-center">
									<!--NO ESTA LOGEADO  -->
									<h:panelGroup rendered="#{empty sessionScope.id_usuario}">
										<!-- Mostrar el formulario aquí -->
										<button type="button" class="btn btn-primary"
											data-bs-toggle="modal" data-bs-target="#login">Comprar
										</button>
									</h:panelGroup>
									<!-- ESTA LOGEADO -->
									<h:panelGroup rendered="#{not empty sessionScope.id_usuario}">
										<!-- Mostrar algo diferente aquí -->
										<h:inputHidden id="id-producto"
											value="#{producto.id_producto}" />
										<b:inputText value="#{inputTextBean.text}" mask="integer"
											label="integer" render-label="true" />

										<h:commandButton value="Comprar"
											action="#{carritoBean.agregarProducto(producto)}"
											class="btn btn-primary" />
									</h:panelGroup>
								</div>
							</div>
						</h:form>
					</div>
				</div>
			</ui:repeat>
		</b:column>
	</b:row>


</h:body>
</html>
